# レシピレベル推論君 要件定義書


## 1. プロジェクト概要 🟢
- プロジェクト名：レシピレベル推論君
- リポジトリ名：recipe_level_predictor
- 目的：FF14のクラフターレシピの難易度を機械学習で推論する
- 期待される成果：
  - 新レシピ実装時の難易度を事前に推論
  - 推論結果に基づいた適切なマクロの作成支援
  - クラフト作業の効率化
- ステークホルダー：
  - 主要ユーザー：FF14でクラフターを行うプレイヤー、マクロ作成者
  - 開発：
    - 主開発者：あなた
    - 開発支援：Claude（AI アシスタント）
  - その他：データ提供元、FF14運営

## 2. 機能要件
### 2.1 必須機能 🟢
- データ入力機能
  - キャラクター情報
    - クラフターレベル
    - 作業精度
    - 加工精度
  - レシピ情報
    - 作成レベル
    - 秘伝書の有無
    - 秘伝書レベル（秘伝書ありの場合）
    - ☆の数（0-5、秘伝書ありの場合のみ）
  - ゲーム内効率情報
    - 作業効率100あたりの工数進捗量
    - 加工効率100あたりの品質進捗量

- 推論出力機能
  - 工数難易度指標
  - 品質難易度指標

### 2.2 オプション機能 🟢
- 実装フェーズ1：推論モデルの段階的な改善機能と分析機能
  - 新規レシピデータの追加・管理
    - 新しいレシピ情報の登録
    - 実測値の記録
    - 学習データの整理・保存
  
  - モデルの改善サイクル
    - 定期的な再学習の実行
    - 学習履歴の管理
    - バージョン管理
  
  - 難易度分析機能
    - 秘伝書レベル間の難易度比較
      - 例：秘伝書11巻☆5 vs 12巻☆3
    - ☆レベルによる難易度の段階的変化
    - 作成レベルと実際の難易度の関係性分析
  
  - 精度検証・可視化機能
    - カテゴリ別の予測精度トラッキング
      - 秘伝書レベル別
      - ☆レベル別
      - 作成レベル帯別
    - 予測精度の推移グラフ
    - 誤差の傾向分析

- 実装フェーズ2：詳細分析・レポート機能
  - 難易度パターンの分析
    - 特徴的な難易度変化の検出
    - 新規レシピの難易度予測の信頼度評価
  
  - トレンド分析
    - パッチ更新による難易度変化の追跡
    - 新規秘伝書追加時の難易度スケール分析
  
  - レポート生成機能
    - 分析結果のサマリー
    - 予測精度レポート
    - 難易度比較チャート

### 2.3 評価指標 🟢
- 推論精度の評価方法
  - 工数進捗量の誤差率
  - 品質進捗量の誤差率

- 精度目標
  - 最終目標：許容誤差±5%以内
  - 総合評価指標：全テストケースの90%以上

- レシピ難易度別の優先度
  1. 秘伝書☆付きレシピ（最優先）
     - 許容誤差：±5%以内必須
     - 対象：90%以上のケース
  
  2. 秘伝書レシピ（高優先）
     - 許容誤差：±5%以内
     - 対象：85%以上のケース
  
  3. 通常レシピ（一般優先）
     - 許容誤差：±7%以内
     - 対象：80%以上のケース

- 段階的な精度向上計画
  1. 初期モデル構築フェーズ
     - 全体で±10%以内
  2. 改良フェーズ
     - 秘伝書レシピで±7%以内
  3. 最終調整フェーズ
     - 目標精度（±5%）の達成
  4. 継続的改善フェーズ
     - 新規レシピへの対応
     - モデルの定期的な再学習

### 2.4 検証方法 🟢
- データセットの位置づけ
  1. 初期データセット
     - 現在実装済みの全秘伝書レシピ
     - 選定された通常レシピ
     - 役割：モデルの学習および初期評価

  2. 継続的な検証・学習データ
     - 新規実装レシピの随時追加
     - 既存データの再検証
     - 役割：モデルの改善とパラメータチューニング

- 将来の拡張性対応
  - 新規秘伝書レベルへの対応
    - 秘伝書12巻以降の追加を想定
    - 難易度の予測範囲の自動調整
  - ☆レベルの変動への対応
    - 現在の最高難易度（秘伝書11巻☆2）を基準
    - 新規難易度の自動スケーリング

- 検証・改善サイクル
  1. 定期的なデータ収集
     - 新規実装レシピの情報収集
     - 実測値の収集と記録
  
  2. モデルの評価・調整
     - 新規データでの精度検証
     - 必要に応じたパラメータ調整
     - 定期的なモデルの再学習

  3. 性能の監視
     - 難易度帯ごとの精度トラッキング
     - 予測精度の経時変化の分析

## 3. 非機能要件
### 3.1 性能要件 🟢
- レスポンス時間
  - 単一レシピの難易度推論：1秒以内
  - モデルの再学習：5分以内
  - 分析レポートの生成：30秒以内

- メモリ使用量
  - 通常動作時：2GB以内
  - モデル学習時：4GB以内

- ストレージ要件
  - 学習データ・モデル：1GB以内
  - 分析結果・レポート：500MB以内

- CPU使用率
  - 通常推論時：30%以下
  - モデル学習時：最大80%まで許容

- 同時実行性
  - シングルユーザー想定
  - バックグラウンドでの学習・分析処理を許容

- 起動時間
  - アプリケーション起動：3秒以内
  - モデルのロード：2秒以内

- データ保存・読み込み
  - 設定ファイルの読み込み：1秒以内
  - データのバックアップ：30秒以内

### 3.2 セキュリティ要件 🟢
- GitHubでの情報管理
  - 機密情報の除外（.gitignore）
  - コミット履歴の整理

### 3.3 運用要件 🟢
- データ管理
  - 学習データの整理
  - 不要なログ・一時ファイルの削除
- アップデート対応
  - パッチ更新後のデータ収集
  - モデルの再学習タイミング

## 4. 技術要件
### 4.1 開発環境 🟢
- 実行環境
  - OS：Windows 11 Home
    - バージョン：23H2
    - ビルド：22631.4602
    - 注記：OS更新の可能性あり
  - Python：3.8以上を推奨
  
- 主要ライブラリ候補
  - データ処理
    - pandas：データフレーム操作
    - numpy：数値計算
  
  - 機械学習
    - scikit-learn：基本的な機械学習モデル
    - optuna：ハイパーパラメータ最適化
    
  - データ可視化
    - matplotlib：基本的なプロット
    - seaborn：統計的可視化
  
  - 開発支援
    - jupyter：対話的な開発・実験
    - pytest：テストフレームワーク
    - black：コードフォーマッタ
    - flake8：コードリンター

- 開発ツール
  - エディタ：Cursor
  - バージョン管理：Git
  - 仮想環境：venv

- プロジェクト構成
  ```
  recipe_level_predictor/
  ├── .git/
  ├── .gitignore
  ├── README.md
  ├── requirements.txt
  ├── setup.py
  ├── notebooks/          # 実験用Jupyter notebooks
  ├── src/               # ソースコード
  │   ├── __init__.py
  │   ├── data/         # データ処理関連
  │   ├── models/       # モデル関連
  │   └── utils/        # ユーティリティ
  ├── tests/            # テストコード
  ├── data/             # データ格納
  │   ├── raw/         
  │   └── processed/    
  └── docs/             # ドキュメント
  ```

### 4.2 インフラ要件 🟢
- ローカル開発環境のみ
- GitHubでのバージョン管理

## 5. プロジェクトスケジュール 🟢
- フェーズ1：基盤開発（1-2ヶ月）
  - 環境構築
  - 基本機能の実装
  - 初期データ収集

- フェーズ2：改善（2-3ヶ月）
  - モデルの改良
  - 精度検証
  - 機能拡張

- フェーズ3：安定化（1ヶ月）
  - バグ修正
  - ドキュメント整備
  - 最終調整

※ 各フェーズの期間は目安であり、柔軟に調整

## 6. 制約条件🟢
- 技術的制約
  - ローカル環境での動作
  - Python 3.8以上
- リソース制約
  - 個人開発者1名
  - 既存PC環境での動作
- データ制約
  - 手動でのデータ収集
  - パッチ更新による仕様変更

## 7. リスク管理 🟢
- 想定されるリスク
  - パッチによる仕様変更
  - データ収集の遅延
  - モデル精度の未達

- 対応方針
  - 柔軟なスケジュール調整
  - 優先度に基づくデータ収集
  - 段階的な精度向上 